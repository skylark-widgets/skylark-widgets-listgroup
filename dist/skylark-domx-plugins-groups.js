/**
 * skylark-domx-plugins-groups - The skylark list plugin library.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx/skylark-domx-plugins-groups/
 * @license MIT
 */
!function(e,t){var s=t.define,require=t.require,i="function"==typeof s&&s.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!s){var n={};s=t.define=function(e,t,s){"function"==typeof s?(n[e]={factory:s,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var s=t.split("/"),i=e.split("/");s.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?s.pop():s.push(i[r]));return s.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):n[e]={factory:null,resolved:!0,exports:s}},require=t.require=function(e){if(!n.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=n[e];if(!module.resolved){var s=[];module.deps.forEach(function(e){s.push(require(e))}),module.exports=module.factory.apply(t,s)||null,module.resolved=!0}return module.exports}}if(!s)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-domx-plugins-groups/groups",["skylark-langx/skylark"],function(e){"use strict";return e.attach("domx.plugins.groups")}),e("skylark-domx-plugins-groups/group",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups"],function(e,t,s,i,r){"use strict";var n=i.Plugin.inherit({klassName:"Group",pluginName:"lark.groups.group",options:{classes:{},selectors:{},item:{template:'<span><i class="glyphicon"></i><a href="javascript: void(0);"></a> </span>',selector:"li",selectable:!1,multiSelect:!1,classes:{base:"item",selected:"selected",active:"active"}}},selected:null,_construct:function(e,t){this.overrided(e,t);var i=this,r=this._velm=s(this._elm),n=this.options.item.selector;r.on("click",n,function(){var e=s(this);if(!e.hasClass("disabled")){let e=i.getItemValue(this);i.setActiveItem(e),i.options.item.selectable&&(i.options.item.multiSelect?i.toggleSelectOneItem(e):(i.clearSelectedItems(),i.selectOneItem(e)))}return!1}),this.resetItems()},resetItems:function(){this._$items=this._velm.$(this.options.item.selector)},findItem:function(s){return(e.isNumber(s)?this._$items.eq(s):e.isString(s)?this._$items.filter('[data-value="'+s+'"]'):t(s))[0]},getItems:function(){return this._$items},getItemValue:function(e){let s=t(e),i=s.data("value");return void 0===i&&(i=this._$items.index(s[0])),i},getItemsCount:function(){return this._$items.size()},getItemIndex:function(e){return this._$items.index(e)},isSelectedItem:function(e){return t(this.findItem(e)).hasClass(this.options.item.classes.selected)},selectOneItem:function(e){t(this.findItem(e)).addClass(this.options.item.classes.selected)},unselectOneItem:function(e){t(this.findItem(e)).removeClass(this.options.item.classes.selected)},clearSelectedItems:function(){let e=this.options.item.classes.selected;this._$items.filter(`.${e}`).removeClass(e)},getSelectedItemValues:function(){let e=this.options.item.classes.selected;return this._$items.filter(`.${e}`).map(e=>this.getItemValue(e))},getSelectedItems:function(){let e=this.options.item.classes.selected;return this._$items.filter(`.${e}`)},getActiveItem:function(){let e=this.options.item.classes.active,t=this._$items.filter(`.${e}`);return t[0]||null},setActiveItem:function(e){let s=this.getActiveItem(),i=this.findItem(e);if(i!=s){let e=this.options.item.classes.active;t(s).removeClass(e),t(i).addClass(e)}},getSelectedItem:function(){let e=this.getSelectedItems();return e[0]||null},toggleSelectOneItem:function(e){this.isSelectedItem(e)?this.unselectOneItem(e):this.selectOneItem(e)},renderItemHtml:function(t){if(!this._renderItemHtml){let t=this.options.item.template;e.isString(t)?this._renderItemHtml=e.template(t):e.isFunction(t)&&(this._renderItemHtml=t)}return this._renderItemHtml(t)}});return i.register(n),r.Group=n}),e("skylark-domx-plugins-groups/_carousel/indicators",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","../groups"],function(e,t,s,i,r,n,o){var a=n.Plugin.inherit({klassName:"Indicators",pluginName:"lark.groups.carousel.indicators",options:{thumbnail:!0,indicator:{template:"<li/>",indexAttrName:"data-index",selector:"> li",classes:{active:"active"}}},_construct:function(e,t){n.Plugin.prototype._construct.call(this,e,t),this._velm=this.elmx(),this.$indicators=this._velm.query(this.options.indicator.selector),this._velm.on("click",`[${this.options.indicator.indexAttrName}]`,e=>{var t=i(e.target),s=t.attr(this.options.indicator.indexAttrName);this.options.carousel.jump(s),e.preventDefault()})},createIndicator:function(t){return this._renderIndicatorHtml||(this._renderIndicatorHtml=e.template(this.options.indicator.template)),i(this._renderIndicatorHtml(t))[0]},addIndicator:function(e,t){var s=this.createIndicator(t);s.setAttribute("data-index",e),this._velm.append(s),this.$indicators=this.$indicators.add(s)},setActiveIndicator:function(e){if(this.$indicators){let t=this.options.indicator.classes.active;this.activeIndicator&&this.activeIndicator.removeClass(t),this.activeIndicator=i(this.$indicators[e]),this.activeIndicator.addClass(t)}}});return a}),e("skylark-domx-plugins-groups/_carousel/mode-slide",["skylark-langx/langx","skylark-langx-events","skylark-domx-eventer"],function(e,t,s){"use strict";var i=t.Emitter.inherit({_construct:function(e){this.carsouel=e},jump:function(e,t,s,i){let r=this.carsouel,n=(r.elmx(),r.options,r.$(r.findItem(t))),o=r.$(r.findItem(e)),a=r.interval,l="next"==s?"left":"right";return a&&r.pause(),o.addClass(s),o.reflow(),n.addClass(l),o.addClass(l),o.one("transitionEnd",function(){o.removeClass([s,l].join(" ")),n.removeClass(l),i()}).emulateTransitionEnd(),a&&r.cycle(),this}});return i}),e("skylark-domx-plugins-groups/_carousel/mode-rotate",["skylark-langx/langx","skylark-langx-events","skylark-domx-eventer","skylark-domx-query","skylark-domx-styler","skylark-domx-plugins-interact/rotatable","skylark-domx-plugins-interact/scalable"],function(e,t,s,i,r,n,o){"use strict";var a=t.Emitter.inherit({options:{},_construct:function(e){this.carsouel=e,this.reset(),this._$threedContainer=e.$(`.${e.options.modes.rotate.classes.threedContainer}`),this._rotatable=new n(this._$threedContainer[0],{starting:function(t){return 0==i(t.target).closest(e.options.item.selector).length},started:function(){},stopped:function(){}}),this._scalable=new o(this._$threedContainer[0],{radius:e.options.modes.rotate.radius,targets:e.getItems()}),this._start=0},reset:function(e){let t=this.carsouel.getItems();if(t){let e=this._itemsCount=t.length,i=this._deltaDeg=360/e;for(var s=0;s<e;s++)r.css(t[s],{transform:"rotateY("+s*i+"deg)"})}},jump:function(e,t,s,i){let r=this.carsouel,n=(r.elmx(),r.options,r.$(r.findItem(t)),r.$(r.findItem(e)));n.addClass(s),n.reflow();let o=r._$itemsContainer;return o.one("transitionEnd",function(){n.removeClass(s),i()}).css("transform","rotateY("+e*this._deltaDeg+"deg)").emulateTransitionEnd(),this}});return a}),e("skylark-domx-plugins-groups/_carousel/mode-coverflow",["skylark-langx/langx","skylark-langx-events","skylark-domx-query"],function(e,t,s){"use strict";var i=t.Emitter.inherit({_construct:function(e){this.carsouel=e,this._itemOffsets=[],this._currentIndex=-1;let t=this.carsouel.options.modes.coverflow.classes;this._classRemover=new RegExp("\\b("+t.itemCurrent+"|"+t.itemPast+"|"+t.itemFuture+")(.*?)(\\s|$)","g"),this._whiteSpaceRemover=new RegExp("\\s\\s+","g"),this.reset()},reset:function(){let e=this.carsouel.options.modes.coverflow.classes,t=this.carsouel._$itemsContainer,i=this.carsouel.getItems(),r=this.carsouel.options.modes.coverflow.spacing;t.css("transition","none"),i.css("transition","none"),i.each((t,i)=>{let n=s(i);n.attr("class",function(e,t){return t&&t.replace(this._classRemover,"").replace(this._whiteSpaceRemover," ")}),n.children("."+e.itemContent).length||n.wrapInner('<div class="'+e.itemContent+'" />');let o=n.outerWidth();0!==r&&n.css("margin-right",o*r+"px")}),this._itemOffsets=[];let n=t.width();var o,a;t.height((a=0,i.each(function(){(o=s(this).height())>a&&(a=o)}),a)),i.each((e,t)=>{let i,r,o=s(t);i=o.outerWidth(),r=o.position().left,this._itemOffsets[e]=-1*(r+i/2-n/2)}),setTimeout(function(){t.css("transition",""),i.css("transition","")},1)},center:function(e){if(void 0!==e?this._currentIndex=e:e=this._currentIndex,e>=0){var t,i,r,n=this.carsouel.options.modes.coverflow.classes,o=this.carsouel._$itemsContainer,a=this.carsouel.getItems(),l=a.length;a.each((o,a)=>{t=s(a),i=" ",o===e?(i+=n.itemCurrent,r=l+1):o<e?(i+=n.itemPast+" "+n.itemPast+"-"+(e-o),r=l-(e-o)):(i+=n.itemFuture+" "+n.itemFuture+"-"+(o-e),r=l-(o-e)),t.css("z-index",r).attr("class",(e,t)=>t&&t.replace(this._classRemover,"").replace(this._whiteSpaceRemover," ")+i)}),o.css("transform","translateX("+this._itemOffsets[e]+"px)")}},jump:function(e,t,s,i){var r=this.carsouel._$itemsContainer;return this.center(e),r.one("transitionEnd",function(){i()}).emulateTransitionEnd(),this}});return i}),e("skylark-domx-plugins-groups/carousel",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups","./group","./_carousel/indicators","./_carousel/mode-slide","./_carousel/mode-rotate","./_carousel/mode-coverflow"],function(e,t,s,i,r,n,o,a,l,c,d,u){"use strict";var m=a.inherit({klassName:"Carousel",pluginName:"lark.groups.carousel",options:{classes:{display:"display",single:"single",leftEdge:"left",rightEdge:"right",cycling:"cycling",controls:"controls"},cycle:{interval:5e3,pause:"hover"},loop:!0,wrap:!0,keyboard:!0,controls:{selectors:{toggle:".toggle",prev:".prev",next:".next",close:".close",cycleStop:".cycle-stop"}},indicators:{indicator:{template:"<li/>",indexAttrName:"data-index"}},selectors:{itemsContainer:".items",indicatorsContainer:".indicators"},item:{selector:".item",classes:{base:"item"}},data:{},mode:"slide",modes:{slide:{classes:{base:"slide"}},rotate:{classes:{base:"rotate",threedContainer:"threed-container"},radius:240},coverflow:{classes:{base:"coverflow",itemPast:"past",itemFuture:"future",itemCurrent:"current",itemContent:"content"},spacing:-.6}},onjumped:null,onjumping:null},_construct:function(t,i){a.prototype._construct.call(this,t,i),this.options.item.selectable=!0,this.options.item.multiSelect=!1,this._$elm=this.$(),this._$itemsContainer=this._$elm.find(this.options.selectors.itemsContainer);let r=this._$elm.find(this.options.selectors.indicatorsContainer);r.length>0&&(this._indicators=new l(r[0],e.mixin({carousel:this,active:0},this.options.indicators)),this._indicators.setActiveIndicator(0)),this.paused=null,this.moving=null,this.interval=null,this.$active=null,this.options.cycle.interval>0?this.cycle(!0):this.cycle(!1);this.options.keyboard&&this._$elm.on("keydown.lark.carousel",e.proxy(this.keydown,this)),"hover"==this.options.cycle.pause&&!("ontouchstart"in document.documentElement)&&this._$elm.on("mouseenter.lark.carousel",e=>{this.pause(!0)}).on("mouseleave.lark.carousel",e=>{this.pause(!1)}),this._$elm.find(this.options.controls.selectors.prev).on("click",e=>{this.prev(),s.stop(e)}),this._$elm.find(this.options.controls.selectors.next).on("click",e=>{this.next(),s.stop(e)}),this._$elm.find(this.options.controls.selectors.cycleStop).on("click",e=>{this.cycle(!this.cycled),s.stop(e)}),this._mode=new h[this.options.mode](this),this.options.data.items&&this.addItems(this.options.data.items);let n=this.options.start;void 0!==n&&("center"===n&&(n=Math.floor(this.getItemsCount()/2)),this.jump(n)),this.options.onjumped&&this.on("jumped",this.options.onjumped),this.options.onjumping&&this.on("jumping",this.options.onjumping)},keydown:function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},cycle:function(t){return e.isDefined(t)&&(this.cycled=!!t,this.cycled?this._velm.addClass(this.options.classes.cycling):this._velm.removeClass(this.options.classes.cycling)),this.interval&&clearInterval(this.interval),this.options.cycle.interval&&this.cycled&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.cycle.interval)),this},getItemForDirection:function(e,t){var s=this.getItemIndex(t),i="prev"==e&&0===s||"next"==e&&s==this._$items.length-1;if(i&&!this.options.wrap)return t;var r="prev"==e?-1:1,n=(s+r)%this._$items.length;return this._$items.eq(n)},setActiveItem:function(e){a.prototype.setActiveItem.call(this,e),this._indicators&&this._indicators.setActiveIndicator(e)},jump:function(e){if(this.jumping)return;let t=this.getItemsCount();if(t<=1)return;let i,r,n=this.getActiveItem(),o=n?this.getItemIndex(n):-1;if("prev"===e?(r=e,o>0?i=o-1:this.options.loop&&(i=t-1)):"next"===e?(r=e,o<t-1?i=o+1:this.options.loop&&(i=0)):"number"==typeof e?i=e:void 0!==e&&(i=this.getItmIndex(e)),!(i<0||i==o)){r||(r=i>o?"next":"prev"),this.jumping=!0;var a=s.create("jumping.lark.carousel",{toIndex:i,currentIndex:o,type:r});if(this.trigger(a),!a.isDefaultPrevented())return this._mode.jump(i,o,r,()=>{this.setActiveItem(i);var e=s.create("jumped.lark.carousel",{toIndex:i,currentIndex:o,type:r});setTimeout(()=>{this.trigger(e)},0),this.jumping=!1}),this;this.jumping=!1}},pause:function(t){return e.isUndefined(t)&&(t=!0),this.paused=!!t,this.cycle(),this},next:function(){return this.jump("next")},prev:function(){return this.jump("prev")},resetItems:function(){a.prototype.resetItems.call(this),this._mode&&this._mode.resetItems&&this._mode.resetItems()},addItems:function(e){let t=this.getItemsCount();for(var s=0;s<e.length;s++)this.addItem(t++,e[s]);this.resetItems()},addItem:function(e,t){let s=this.renderItemHtml(t),r=this.options.item.classes.base,n=i(s);r&&n.addClass(r),this._$itemsContainer&&this._$itemsContainer.append(n),this._indicators&&this._indicators.addIndicator(e,t)}}),h=m.modes={slide:c,rotate:d,coverflow:u};return n.register(m),o.Carousel=m}),e("skylark-domx-plugins-groups/linear",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","skylark-domx-plugins-toggles/collapse","./groups","./group"],function(e,t,s,i,r,n,o){"use strict";var a=o.inherit({klassName:"Linear",pluginName:"lark.groups.linear",options:{item:{selectable:!0},data:{}},_construct:function(e,t){this.overrided(e,t),this.options.data.items&&this.addItems(this.options.data.items)}});return i.register(a),n.Linear=a}),e("skylark-domx-plugins-dnd/draggable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./dnd","./manager"],function(e,t,s,i,r,n,o,a,l,c){n.on,n.off,s.attr,s.removeAttr,r.pagePosition,o.addClass,r.height;var d=a.Plugin.inherit({klassName:"Draggable",pluginName:"lark.dnd.draggable",options:{draggingClass:"dragging"},_construct:function(t,r){this.overrided(t,r);var o=this,r=this.options;o.draggingClass=r.draggingClass,["preparing","started","ended","moving"].forEach(function(t){e.isFunction(r[t])&&o.on(t,r[t])}),n.on(t,{mousedown:function(e){var t=o.options;t.handle&&(o.dragHandle=i.closest(e.target,t.handle),!o.dragHandle)||(t.source?o.dragSource=i.closest(e.target,t.source):o.dragSource=o._elm,c.prepare(o),o.dragSource&&s.attr(o.dragSource,"draggable","true"))},mouseup:function(e){o.dragSource&&(o.dragSource=null,o.dragHandle=null)},dragstart:function(e){s.attr(o.dragSource,"draggable","false"),c.start(o,e)},dragend:function(e){n.stop(e),c.dragging&&c.end(!1)}})}});return a.register(d,"draggable"),l.Draggable=d}),e("skylark-domx-plugins-dnd/droppable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./dnd","./manager"],function(e,t,s,i,r,n,o,a,l,c){n.on,n.off,s.attr,s.removeAttr,r.pagePosition,o.addClass,r.height;var d=a.Plugin.inherit({klassName:"Droppable",pluginName:"lark.dnd.droppable",options:{draggingClass:"dragging"},_construct:function(t,s){this.overrided(t,s);var i,r,a=this,s=a.options,l=(s.draggingClass,!0);["started","entered","leaved","dropped","overing"].forEach(function(t){e.isFunction(s[t])&&a.on(t,s[t])}),n.on(t,{dragover:function(e){if(e.stopPropagation(),l){var t=n.create("overing",{overElm:e.target,transfer:c.draggingTransfer,acceptable:!0});a.trigger(t),t.acceptable&&(e.preventDefault(),e.dataTransfer.dropEffect="copyMove")}},dragenter:function(e){a.options;var t=a._elm,s=n.create("entered",{transfer:c.draggingTransfer});a.trigger(s),e.stopPropagation(),i&&l&&o.addClass(t,i)},dragleave:function(e){a.options;var t=a._elm;if(!l)return!1;var s=n.create("leaved",{transfer:c.draggingTransfer});a.trigger(s),e.stopPropagation(),i&&l&&o.removeClass(t,i)},drop:function(e){a.options;var t=a._elm;if(n.stop(e),c.dragging){i&&l&&o.addClass(t,i);var s=n.create("dropped",{transfer:c.draggingTransfer});a.trigger(s),c.end(!0)}}}),c.on("dndStarted",function(e){var s=n.create("started",{transfer:c.draggingTransfer,acceptable:!1});a.trigger(s),l=s.acceptable,i=s.hoverClass,(r=s.activeClass)&&l&&o.addClass(t,r)}).on("dndEnded",function(e){var s=n.create("ended",{transfer:c.draggingTransfer,acceptable:!1});a.trigger(s),i&&l&&o.removeClass(t,i),r&&l&&o.removeClass(t,r),l=!1,r=null,i=null})}});return a.register(d,"droppable"),l.Droppable=d}),e("skylark-domx-plugins-groups/sortable",["./groups","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","skylark-domx-plugins-dnd/draggable","skylark-domx-plugins-dnd/droppable"],function(e,t,s,i,r,n,o,a,l,c,d){"use strict";n.on,n.off,i.attr,i.removeAttr,r.pagePosition,o.addClass,r.height,Array.prototype.some,Array.prototype.map,l.Plugin.inherit({klassName:"Sorter",enable:function(){},disable:function(){},destory:function(){}});var u,m=a(),h=l.Plugin.inherit({klassName:"Sortable",pluginName:"lark.groups.sortable",options:{connectWith:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",items:null},_construct:function(e,t){this.overrided(e,t),t=this.options;var i,r=a(e),n=r.children(t.items),o=a(t.placeholder||s.createElement(/^(ul|ol)$/i.test(e.tagName)?"li":"div",{class:t.placeholderClass}));c(e,{source:t.items,handle:t.handle,draggingClass:t.draggingClass,preparing:function(e){},started:function(e){e.ghost=e.dragSource,e.transfer={text:"dummy"},i=(u=a(e.dragSource)).index()},ended:function(e){u&&(u.show(),m.detach(),i!=u.index()&&u.parent().trigger("sortupdate",{item:u}),u=null)}}),d(e,{started:function(e){e.acceptable=!0,e.activeClass="active",e.hoverClass="over"},overing:function(e){n.is(e.overElm)?(t.forcePlaceholderSize&&o.height(u.outerHeight()),u.hide(),a(e.overElm)[o.index()<a(e.overElm).index()?"after":"before"](o),m.not(o).detach()):m.is(e.overElm)||a(e.overElm).children(t.items).length||(m.detach(),a(e.overElm).append(o))},dropped:function(e){m.filter(":visible").after(u),u.show(),m.detach(),u=null}}),r.data("items",t.items),m=m.add(o),t.connectWith&&a(t.connectWith).add(this).data("connectWith",t.connectWith)}});return l.register(h,"sortable"),e.Sortable=h}),e("skylark-domx-plugins-groups/tiler",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups","./group"],function(e,t,s,i,r,n){"use strict";var o=n.inherit({klassName:"Tiler",pluginName:"lark.groups.tiler",options:{alignment:"left",infiniteScroll:!1,itemRendered:null,noItemsHTML:"no items found",selectable:!1,viewClass:"repeater-tile",template:'<div class="clearfix repeater-tile" data-container="true" data-infinite="true" data-preserve="shallow"></div>',item:{template:'<div class="thumbnail"><img height="75" src="<%= href %>" width="65"><span><%= title %></span></div>',selectable:!0},renderItem:null},_construct:function(s,i){this.overrided(s,i),this._renderItem=e.template(this.options.item.template);for(var r=0;r<i.items.length;r++){var n=this._renderItem(i.items[r]);this._velm.append(t(n))}}});return i.register(o),r.Tiler=o}),e("skylark-domx-plugins-groups/main",["./groups","./group","./carousel","./linear","./sortable","./tiler"],function(e){return e}),e("skylark-domx-plugins-groups",["skylark-domx-plugins-groups/main"],function(e){return e})}(s),!i){var o=require("skylark-langx-ns");r?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-groups.js.map
