{"version":3,"sources":["_carousel/mode-rotate.js"],"names":["define","langx","events","eventer","$","styler","Rotatable","Scalable","Emitter","inherit","options","_construct","carsouel","this","reset","_$threedContainer","modes","rotate","classes","threedContainer","_rotatable","started","stopped","_scalable","radius","targets","getItems","_start","delayTime","items","itemsCount","_itemsCount","length","deltaDeg","_deltaDeg","i","css","transform","jump","toIndex","currentIndex","type","ended","$next","elmx","findItem","addClass","reflow","_$itemsContainer","one","removeClass","emulateTransitionEnd"],"mappings":";;;;;;;AAACA,QACC,sBACA,uBACA,uBACA,qBACA,sBACA,0CACA,0CACA,SAASC,EAAMC,EAAOC,EAAQC,EAAEC,EAAOC,EAAUC,GACjD,aA8EA,OA3EiBL,EAAOM,QAAQC,SAE/BC,WAKCC,WAAa,SAASC,GACrBC,KAAKD,SAAWA,EAEhBC,KAAKC,QAEFD,KAAKE,kBAAoBH,EAASR,MAAMQ,EAASF,QAAQM,MAAMC,OAAOC,QAAQC,mBAEjFN,KAAKO,WAAa,IAAId,EAAUO,KAAKE,kBAAkB,IACpDM,QAAU,aAIVC,QAAU,eAKbT,KAAKU,UAAY,IAAIhB,EAASM,KAAKE,kBAAkB,IACpDS,OAASZ,EAASF,QAAQM,MAAMC,OAAOO,OACvCC,QAAUb,EAASc,aAGpBb,KAAKc,OAAS,GAIfb,MAAQ,SAASc,GAChB,IAAIC,EAAQhB,KAAKD,SAASc,WAC1B,GAAIG,EAAO,CACV,IAAIC,EAAajB,KAAKkB,YAAcF,EAAMG,OACzCC,EAAWpB,KAAKqB,UAAY,IAAMJ,EAEnC,IAAK,IAAIK,EAAI,EAAGA,EAAIL,EAAYK,IAC/B9B,EAAO+B,IAAIP,EAAMM,IAChBE,UAAY,WAAcF,EAAIF,EAAY,WAM9CK,KAAO,SAASC,EAAQC,EAAaC,EAAKC,GACtC,IAAI9B,EAAWC,KAAKD,SAKhB+B,GAJO/B,EAASgC,OACNhC,EAASF,QAERE,EAASR,EAAEQ,EAASiC,SAASL,IAChC5B,EAASR,EAAEQ,EAASiC,SAASN,KAezC,OAbAI,EAAMG,SAASL,GACfE,EAAMI,SAEgBnC,EAASoC,iBAG1BC,IAAI,gBAAiB,WAClBN,EAAMO,YAAYT,GAClBC,MAEHN,IAAI,YAAY,WAAcG,EAAU1B,KAAKqB,UAAa,QAC1DiB,uBAEEtC","file":"../../_carousel/mode-rotate.js","sourcesContent":[" define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-langx-events\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-styler\",\r\n  \"skylark-domx-plugins-interact/rotatable\",\r\n  \"skylark-domx-plugins-interact/scalable\"\r\n],function(langx,events,eventer,$,styler,Rotatable,Scalable){\r\n  'use strict'\r\n\r\n\r\n  var ModeRotate = events.Emitter.inherit({\r\n\r\n  \toptions : {\r\n\r\n  \t},\r\n\r\n\r\n    _construct : function(carsouel) {\r\n    \tthis.carsouel = carsouel;\r\n\r\n    \tthis.reset();\r\n\r\n        this._$threedContainer = carsouel.$(`.${carsouel.options.modes.rotate.classes.threedContainer}`)\r\n\r\n    \tthis._rotatable = new Rotatable(this._$threedContainer[0],{\r\n\t\t      started : function() {\r\n\t\t          //playSpin(false);\r\n\t\t      },\r\n\r\n\t\t      stopped : function() {\r\n\t\t          //playSpin(true);\r\n\t\t      }\r\n    \t});\r\n\r\n    \tthis._scalable = new Scalable(this._$threedContainer[0],{\r\n    \t\tradius : carsouel.options.modes.rotate.radius,\r\n    \t\ttargets : carsouel.getItems()\r\n    \t});\r\n\r\n    \tthis._start = 0;\r\n\r\n    },\r\n\r\n    reset : function(delayTime) {\r\n    \tlet items = this.carsouel.getItems();\r\n    \tif (items) {\r\n    \t\tlet itemsCount = this._itemsCount = items.length,\r\n    \t\t\tdeltaDeg = this._deltaDeg = 360 / itemsCount;\r\n\r\n\t\t    for (var i = 0; i < itemsCount; i++) {\r\n\t\t    \tstyler.css(items[i],{\r\n\t\t    \t\ttransform : \"rotateY(\" + (i * deltaDeg) + \"deg)\"\r\n\t\t    \t});\r\n\t\t    }    \t\t\r\n    \t}\r\n    },\r\n\r\n    jump : function(toIndex,currentIndex,type,ended) {\r\n        let carsouel = this.carsouel,\r\n            velm = carsouel.elmx(),\r\n            options = carsouel.options,\r\n\r\n            $active =  carsouel.$(carsouel.findItem(currentIndex)),\r\n            $next = carsouel.$(carsouel.findItem(toIndex));\r\n\r\n        $next.addClass(type);\r\n        $next.reflow(); // [0].offsetWidth; // force reflow\r\n\r\n        let $itemsContainer = carsouel._$itemsContainer;\r\n\r\n        $itemsContainer\r\n            .one('transitionEnd', function() {\r\n                $next.removeClass(type);\r\n                ended();\r\n            })\r\n            .css(\"transform\",\"rotateY(\" + (toIndex * this._deltaDeg) + \"deg)\")\r\n            .emulateTransitionEnd();\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n  });\r\n\r\n\r\n  return ModeRotate;\t\r\n});"]}