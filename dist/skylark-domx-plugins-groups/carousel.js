/**
 * skylark-domx-plugins-groups - The skylark list plugin library.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx/skylark-domx-plugins-groups/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups","./group","./_carousel/indicators","./_carousel/effect_slide"],function(t,e,s,i,n,o,r,a,l,c){"use strict";var h={slide:c},u=a.inherit({klassName:"Carousel",pluginName:"lark.groups.carousel",options:{cycle:{interval:5e3,pause:"hover"},wrap:!0,keyboard:!0,controls:{selectors:{toggle:".toggle",prev:".prev",next:".next",close:".close",playPause:".play-pause"}},indicators:{indicator:{template:"<li/>",indexAttrName:"data-index"}},selectors:{itemsContainer:".items",indicatorsContainer:".indicators"},item:{selector:".item",classes:{base:"item"}},effect:"slide",startIndex:0,effects:{slide:{classes:{base:"slide"}},rotate:{classes:{base:"rotate"}},coverflow:{classes:{base:"coverflow"}}},onjumped:null,onjumping:null},_construct:function(e,i){a.prototype._construct.call(this,e,i),this.options.item.selectable=!0,this.options.item.multiSelect=!1,this._$elm=this.$(),this._$itemsContainer=this._$elm.find(this.options.selectors.itemsContainer);let n=this._$elm.find(this.options.selectors.indicatorsContainer);n.length>0&&(this._indicators=new l(n[0],t.mixin({carousel:this,active:0},this.options.indicators)),this._indicators.setActiveIndicator(0)),this.paused=null,this.moving=null,this.interval=null,this.$active=null,this.options.cycle.interval>0?this.cycle(!0):this.cycle(!1);this.options.keyboard&&this._$elm.on("keydown.lark.carousel",t.proxy(this.keydown,this)),"hover"==this.options.cycle.pause&&!("ontouchstart"in document.documentElement)&&this._$elm.on("mouseenter.lark.carousel",t=>{this.pause(!0)}).on("mouseleave.lark.carousel",t=>{this.pause(!1)}),this._$elm.find(this.options.controls.selectors.prev).on("click",t=>{this.prev(),s.stop(t)}),this._$elm.find(this.options.controls.selectors.next).on("click",t=>{this.next(),s.stop(t)}),this._effect=new h[this.options.effect](this),this.options.items&&(this.addItems(this.options.items),this.jump(this.options.startIndex)),this.options.onjumped&&this.on("jumped",this.options.onjumped),this.options.onjumping&&this.on("jumping",this.options.onjumping)},keydown:function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},cycle:function(e){return t.isDefined(e)&&(this.cycled=!!e),this.interval&&clearInterval(this.interval),this.options.cycle.interval&&this.cycled&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.cycle.interval)),this},getItemForDirection:function(t,e){var s=this.getItemIndex(e);if(("prev"==t&&0===s||"next"==t&&s==this._$items.length-1)&&!this.options.wrap)return e;var i=(s+("prev"==t?-1:1))%this._$items.length;return this._$items.eq(i)},jump:function(t){var e=this,s=this.getActiveItem(),i=s?this.getItemIndex(s):-1;if(!(t>this._$items.length-1||t<0))return this.moving?this._$elm.one("jumped.lark.carousel",function(){e.jump(t)}):i==t?this.pause().cycle():this._effect.jump(t>i?"next":"prev",this._$items.eq(t))},pause:function(e){return t.isUndefined(e)&&(e=!0),this.paused=!!e,this.cycle(),this},next:function(){if(!this.moving)return this._effect.jump("next")},prev:function(){if(!this.moving)return this._effect.jump("prev")},addItems:function(t){let e=this.getItemsCount();for(var s=0;s<t.length;s++)this.addItem(e++,t[s]);this.resetItems()},addItem:function(t,e){let s=this.renderItemHtml(e),n=this.options.item.classes.base,o=i(s);n&&o.addClass(n),this._$itemsContainer&&this._$itemsContainer.append(o),this._indicators&&this._indicators.addIndicator(t,e)}});return o.register(u),r.Carousel=u});
//# sourceMappingURL=sourcemaps/carousel.js.map
