/**
 * skylark-domx-plugins-groups - The skylark list plugin library.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx/skylark-domx-plugins-groups/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-langx-events","skylark-domx-query"],function(t,e,s){"use strict";return e.Emitter.inherit({_construct:function(t){this.carsouel=t,this._itemOffsets=[],this._currentIndex=-1;let e=this.carsouel.options.modes.coverflow.classes;this._classRemover=new RegExp("\\b("+e.itemCurrent+"|"+e.itemPast+"|"+e.itemFuture+")(.*?)(\\s|$)","g"),this._whiteSpaceRemover=new RegExp("\\s\\s+","g"),this.reset()},reset:function(t){let e=this.carsouel.options.modes.coverflow.classes,i=this.carsouel._$itemsContainer,n=this.carsouel.getItems(),r=this.carsouel.options.modes.coverflow.spacing;t&&(i.css("transition","none"),n.css("transition","none")),this._itemOffsets=[];let o=i.width();var c,a;i.height((a=0,n.each(function(){(c=s(this).height())>a&&(a=c)}),a)),n.each((t,i)=>{var n,c,a=s(i);a.attr("class",function(t,e){return e&&e.replace(this._classRemover,"").replace(this._whiteSpaceRemover," ")}),n=a.outerWidth(),0!==r&&a.css("margin-right",n*r+"px"),c=a.position().left,this._itemOffsets[t]=-1*(c+n/2-o/2),a.children("."+e.itemContent).length||a.wrapInner('<div class="'+e.itemContent+'" />')}),this._currentIndex>=0&&this.center(),t&&setTimeout(function(){i.css("transition",""),n.css("transition","")},1)},center:function(t){if(void 0!==t?this._currentIndex=t:t=this._currentIndex,t>=0){var e,i,n,r=this.carsouel.options.modes.coverflow.classes,o=this.carsouel._$itemsContainer,c=this.carsouel.getItems(),a=c.length;c.each((o,c)=>{e=s(c),i=" ",o===t?(i+=r.itemCurrent,n=a+1):o<t?(i+=r.itemPast+" "+r.itemPast+"-"+(t-o),n=a-(t-o)):(i+=r.itemFuture+" "+r.itemFuture+"-"+(o-t),n=a-(o-t)),e.css("z-index",n).attr("class",(t,e)=>e&&e.replace(this._classRemover,"").replace(this._whiteSpaceRemover," ")+i)}),o.css("transform","translateX("+this._itemOffsets[t]+"px)")}},jump:function(t,e,s,i){var n=this.carsouel._$itemsContainer;return this.center(t),n.one("transitionEnd",function(){i()}).emulateTransitionEnd(),this}})});
//# sourceMappingURL=../sourcemaps/_carousel/mode-coverflow.js.map
